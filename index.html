<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuarantineRush: Real NYC</title>
    
    <script src="https://cesium.com/downloads/cesiumjs/releases/1.111/Build/Cesium/Cesium.js"></script>
    <link href="https://cesium.com/downloads/cesiumjs/releases/1.111/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="src/css/style.css">
</head>
<body>

    <div id="ui-layer">
        <div class="panel top-left">
            <h1 class="game-title">QUARANTINE<span class="danger">RUSH</span></h1>
            <div class="sub-title">üìç MANHATTAN (BIO-SECURITY LAYER)</div>
        </div>
        
        <div class="panel top-center">
            <div class="hud-item"><span class="hud-label">IMMUNITY</span><span id="lives-display" class="hud-value" style="color: #ffcc00;">‚ò£Ô∏è ‚ò£Ô∏è ‚ò£Ô∏è</span></div>
            <div class="hud-item"><span class="hud-label">TIME</span><span id="timer-display" class="hud-value">60</span></div>
            <div class="hud-item"><span class="hud-label">LEVEL</span><span id="level-display" class="hud-value" style="color: cyan;">1</span></div>
            <div class="hud-item"><span class="hud-label">SCORE</span><span id="score-display" class="hud-value">0</span></div>
        </div>

        <div class="panel top-right">
            <button onclick="flyToStreet()" class="cam-btn">üèôÔ∏è STREET</button>
            <button onclick="flyToDrone()" class="cam-btn">üõ∞Ô∏è DRONE</button>
        </div>

        <div class="panel bottom-center">
            <div style="width: 300px; height: 100px; position: relative;"> 
                <canvas id="infectionChart"></canvas>
                <div id="combo-popup" class="hidden">COMBO!</div>
            </div>
            <div class="stat-box">
                <span id="status-text" class="blink">AWAITING INPUT...</span>
            </div>
        </div>
    </div>

    <div id="game-over-modal" class="hidden">
        <div class="modal-content">
            <h1 id="game-result-title">MISSION ENDED</h1>
            <p>Final Score: <span id="final-score">0</span></p>
            <button onclick="location.reload()" class="restart-btn">RESTART MISSION</button>
        </div>
    </div>

    <div id="start-screen">
        <div class="start-content">
            <h1 class="main-title" style="font-size: 50px;">QUARANTINE<span class="danger">RUSH</span></h1>
            <div class="mission-brief">
                <h3>‚ö†Ô∏è MISSION BRIEFING</h3>
                <p>New York is under viral attack. Command the satellite defense system.</p>
                <ul>
                    <li>üéØ <strong>GOAL:</strong> Quarantine infected (RED) taxis.</li>
                    <li>üõ°Ô∏è <strong>PROTECT:</strong> Do NOT target healthy (YELLOW) taxis.</li>
                    <li>‚ù§Ô∏è <strong>LIVES:</strong> 2 Mistakes = 1 Life Lost.</li>
                </ul>
            </div>
            <button onclick="startGame()" class="start-btn">INITIATE PROTOCOL</button>
        </div>
    </div>

    <div id="cesiumContainer"></div>

    <script src="src/js/sim_data.js"></script>
    <script src="src/js/map.js"></script>

</body>
</html>